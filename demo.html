<iframe src="http://localhost:8080/workflow" height="1000" width="1000">
</iframe>

<script>
	const sampleWorkflow = {
	  "nodes": [
	    {
	      "parameters": {},
	      "name": "Start",
	      "type": "n8n-nodes-base.start",
	      "typeVersion": 1,
	      "position": [
	        240,
	        300
	      ]
	    },
	    {
	      "parameters": {
	        "attachments": [],
	        "otherOptions": {}
	      },
	      "name": "Slack",
	      "type": "n8n-nodes-base.slack",
	      "typeVersion": 1,
	      "position": [
	        720,
	        300
	      ]
	    }
	  ],
	  "connections": {
	    "Start": {
	      "main": [
	        [
	          {
	            "node": "Slack",
	            "type": "main",
	            "index": 0
	          }
	        ]
	      ]
	    }
	  }
	};


	const loadWorkflow = (workflow) => {
		const iframe = document.querySelector('iframe');
		iframe.contentWindow.postMessage(JSON.stringify(
			{
				command: 'openWorkflow',
				workflow,
			}
		), '*');
	};

	window.addEventListener('message', ({ data }) => {
		try {
			const json = JSON.parse(data);
			if (json.command === 'n8nReady') {
				console.log('n8n ready');
				loadWorkflow(sampleWorkflow);
			}
			else if (json.command === 'openNDV') {
				// expand iframe
				console.log('open ndv')	;
			}
			else if (json.command === 'closeNDV') {
				// close iframe
				console.log('close ndv');
			}
		} catch (e) {
		}
	});
</script>
